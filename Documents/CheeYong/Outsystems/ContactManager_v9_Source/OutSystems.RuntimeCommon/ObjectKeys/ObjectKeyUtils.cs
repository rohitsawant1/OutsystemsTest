/* 
 This source code (the "Generated Software") is generated by the OutSystems Platform 
 and is licensed by OutSystems (http://www.outsystems.com) to You solely for testing and evaluation 
 purposes, unless You and OutSystems have executed a specific agreement covering the use terms and 
 conditions of the Generated Software, in which case such agreement shall apply. 
*/

using OutSystems.ObjectKeys;

namespace OutSystems.RuntimeCommon {

    public static class ObjectKeyUtils {

        public static string DatabaseValue(ObjectKey key) {
            if (key == null) {
                return string.Empty;
            } else {
                return key.ToString(ObjectKey.DatabaseFormat);
            }
        }

        public static string DatabaseValue(GlobalObjectKey key) {
            if (key == null) {
                return string.Empty;
            } else {
                return key.ToString(ObjectKey.DatabaseFormat);
            }
        }
        
        public static ObjectKey ReplaceKeyReference(ObjectKey key, ObjectKey replaceFrom, ObjectKey replaceTo, out bool changed) {
            if (key.IsLocal) {
                ObjectKey result = ObjectKey.NewKey(key.LocalPart);
                result.Parent = ReplaceKeyReference(key.Parent, replaceFrom, replaceTo, out changed);
                return result;
            } else if (key == replaceFrom) {
                changed = true;
                return replaceTo;
            } else {
                changed = false;
                return key;
            }
        }
    }
}