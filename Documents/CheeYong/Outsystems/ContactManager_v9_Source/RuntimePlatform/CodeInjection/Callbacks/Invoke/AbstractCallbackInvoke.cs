/* 
 This source code (the "Generated Software") is generated by the OutSystems Platform 
 and is licensed by OutSystems (http://www.outsystems.com) to You solely for testing and evaluation 
 purposes, unless You and OutSystems have executed a specific agreement covering the use terms and 
 conditions of the Generated Software, in which case such agreement shall apply. 
*/

using System;

namespace OutSystems.HubEdition.RuntimePlatform.Callbacks.Invoke {
    [Serializable]
    public abstract class AbstractCallbackInvoke {
        public abstract string ProviderName {
            get;
        }

        public abstract object Invoke(string locale, AppInfo app, SessionInfo session, AbstractCallback.EventListener listener);

        public sealed override bool Equals(object obj) {
            return obj is AbstractCallbackInvoke && Equals((AbstractCallbackInvoke) obj);
        }

        protected abstract bool Equals(AbstractCallbackInvoke obj);
        public abstract override int GetHashCode();                


        protected int GetESpaceId(AppInfo app) {
            return app.eSpaceId;
        }
        protected int GetTenantId(AppInfo app) {
            return System.Web.HttpContext.Current != null? app.Tenant.Id : 0;
        }
        protected int GetUserId(SessionInfo session) {
            return session != null? session.UserId : 0;
        }
        protected CallbackEvent GetCallbackEvent(AbstractCallback.EventListener listener) {
            return listener == null? CallbackEvent.Unknown: listener.Event;
        }
    }
}